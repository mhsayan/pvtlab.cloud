---
import type { HTMLAttributes } from "astro/types";
import { SOCIALS } from "@/constants";
import { SITE } from "@/config";

const currentYear = new Date().getFullYear();

type Props = {
  noMarginTop?: boolean;
} & HTMLAttributes<"footer">;

const { noMarginTop = false, class: className, ...attrs } = Astro.props;
---

<footer
  class:list={["app-layout", { "mt-auto": !noMarginTop }, className]}
  {...attrs}
>
  <div class="footer-main">
    <!-- Brand & Copyright -->
    <div class="footer-brand">
      <a href="/" class="footer-logo">{SITE.title}</a>
      <span class="footer-copyright">&copy; {currentYear}</span>
    </div>

    <!-- Navigation -->
    <nav class="footer-nav">
      <a href="/posts">Posts</a>
      <a href="/about">About</a>
      <a href="/search">Search</a>
      {SITE.showArchives && <a href="/archives">Archives</a>}
      <a href="/rss.xml" target="_blank">RSS</a>
    </nav>

    <!-- Socials -->
    {
      SOCIALS.length > 0 && (
        <div class="footer-socials">
          {SOCIALS.map(social => (
            <a
              href={social.href}
              target="_blank"
              rel="noopener noreferrer"
              class="footer-social-link"
              title={social.linkTitle}
            >
              <social.icon class="size-[18px] stroke-current stroke-[1.5]" />
            </a>
          ))}
        </div>
      )
    }
  </div>
</footer>

<style>
  .footer-main {
    display: flex;
    flex-direction: column;
    gap: 2rem;
    padding: 5rem 0 4rem;
  }

  @media (min-width: 640px) {
    .footer-main {
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      padding: 6rem 0 5rem;
    }
  }

  .footer-brand {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .footer-logo {
    font-size: 1rem;
    font-weight: 600;
    color: var(--foreground);
    transition: color 0.2s;
  }

  .footer-logo:hover {
    color: var(--accent);
  }

  .footer-copyright {
    font-size: 0.8125rem;
    color: color-mix(in srgb, var(--foreground) 40%, transparent);
  }

  .footer-nav {
    display: flex;
    flex-wrap: wrap;
    gap: 1.25rem;
  }

  .footer-nav a {
    font-size: 0.875rem;
    color: color-mix(in srgb, var(--foreground) 55%, transparent);
    transition: color 0.2s;
  }

  .footer-nav a:hover {
    color: var(--accent);
  }

  .footer-socials {
    display: flex;
    gap: 0.5rem;
  }

  .footer-social-link {
    color: color-mix(in srgb, var(--foreground) 45%, transparent);
    transition: color 0.2s;
  }

  .footer-social-link:hover {
    color: var(--accent);
  }
</style>
